<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flight Booking Admin Panel</title>
    <link rel="stylesheet" href="css/admin.css">
    <link rel="stylesheet" href="css/chat-styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
</head>
<body>
    <div class="admin-container">
        <!-- Sidebar -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <h2><i class="fas fa-plane"></i> Flight Admin</h2>
            </div>
            <ul class="sidebar-menu">
                <li class="menu-item active" data-page="dashboard">
                    <i class="fas fa-chart-pie"></i>
                    <span>T·ªïng quan</span>
                </li>
                <li class="menu-item" data-page="bookings">
                    <i class="fas fa-ticket-alt"></i>
                    <span>Qu·∫£n l√Ω ƒë·∫∑t v√©</span>
                </li>
                <li class="menu-item" data-page="users">
                    <i class="fas fa-users"></i>
                    <span>Qu·∫£n l√Ω kh√°ch h√†ng</span>
                </li>
                <li class="menu-item" data-page="payments">
                    <i class="fas fa-credit-card"></i>
                    <span>Qu·∫£n l√Ω thanh to√°n</span>
                </li>
                <li class="menu-item" data-page="flights">
                    <i class="fas fa-plane"></i>
                    <span>Qu·∫£n l√Ω chuy·∫øn bay</span>
                </li>
                <li class="menu-item" data-page="airline-revenue">
                    <i class="fas fa-coins"></i>
                    <span>Doanh thu h√£ng bay</span>
                </li>
                <li class="menu-item" data-page="customer-support">
                    <i class="fas fa-headset"></i>
                    <span>H·ªó tr·ª£ kh√°ch h√†ng</span>
                </li>
                <li class="menu-item" data-page="notifications">
                    <i class="fas fa-bell"></i>
                    <span>Qu·∫£n l√Ω th√¥ng b√°o</span>
                    <span id="notifications-badge" class="notification-badge" style="display:none;">0</span>
                </li>
                <li class="menu-item" data-page="reports">
                    <i class="fas fa-chart-bar"></i>
                    <span>B√°o c√°o & Ph√¢n t√≠ch</span>
                </li>
            </ul>
            <div style="margin-top:auto; padding: 12px;">
                <button class="btn btn-danger" onclick="logout()" title="ƒêƒÉng xu·∫•t" style="width:100%">
                    <i class="fas fa-sign-out-alt"></i> ƒêƒÉng xu·∫•t
                </button>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <div class="header-left">
                    <button class="sidebar-toggle">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h1 id="page-title">T·ªïng quan</h1>
                </div>
                <div class="header-right">
                    <label class="toggle-switch" title="T·ª± ƒë·ªông l√†m m·ªõi d·ªØ li·ªáu">
                        <input type="checkbox" id="auto-refresh-toggle" onchange="toggleAutoRefresh()">
                        <span class="slider"></span>
                        <span style="margin-left: 8px; font-size: 14px;">Auto-refresh</span>
                    </label>
                </div>
            </header>
            
            <!-- Toast Notifications Container -->
            <div id="toast-container" class="toast-container"></div>

            <!-- Dashboard Page -->
            <div id="dashboard-page" class="page active">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-ticket-alt"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="total-bookings">0</h3>
                            <p>T·ªïng ƒë·∫∑t v√©</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="total-users">0</h3>
                            <p>T·ªïng kh√°ch h√†ng</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-credit-card"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="total-revenue">0 VNƒê</h3>
                            <p>Doanh thu</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="success-rate">0%</h3>
                            <p>T·ª∑ l·ªá th√†nh c√¥ng</p>
                        </div>
                    </div>
                </div>

                <!-- Revenue Time Filter -->
                <div class="revenue-filter" style="margin: 20px 0; display: flex; gap: 10px; align-items: center;">
                    <label style="font-weight: bold;">Xem theo:</label>
                    <select id="revenue-time-filter" onchange="changeRevenueTimeFilter()" style="padding: 8px 12px; border: 1px solid #ddd; border-radius: 5px; font-size: 14px;">
                        <option value="day">Ng√†y</option>
                        <option value="week">Tu·∫ßn</option>
                        <option value="month" selected>Th√°ng</option>
                        <option value="year">NƒÉm</option>
                    </select>
                    <input type="date" id="revenue-start-date" style="padding: 8px; border: 1px solid #ddd; border-radius: 5px;">
                    <span>ƒë·∫øn</span>
                    <input type="date" id="revenue-end-date" style="padding: 8px; border: 1px solid #ddd; border-radius: 5px;">
                    <button class="btn btn-primary" onclick="applyRevenueFilter()" style="padding: 8px 16px;">
                        <i class="fas fa-filter"></i> √Åp d·ª•ng
                    </button>
                </div>

                <div class="charts-grid">
                    <div class="chart-card">
                        <h3 id="revenue-chart-title">Doanh thu theo th√°ng</h3>
                        <canvas id="revenueChart"></canvas>
                    </div>
                    <div class="chart-card">
                        <h3>Ph∆∞∆°ng th·ª©c thanh to√°n</h3>
                        <canvas id="paymentMethodChart"></canvas>
                    </div>
                    <div class="chart-card">
                        <h3>Tr·∫°ng th√°i ƒë·∫∑t v√©</h3>
                        <canvas id="bookingStatusChart"></canvas>
                    </div>
                    <div class="chart-card">
                        <h3>Kh√°ch h√†ng m·ªõi theo th√°ng</h3>
                        <canvas id="newUsersChart"></canvas>
                    </div>
                    <div class="chart-card">
                        <h3>T·ª∑ l·ªá h·ªßy v√©</h3>
                        <canvas id="cancellationRateChart"></canvas>
                    </div>
                    <div class="chart-card">
                        <h3>Top h√£ng h√†ng kh√¥ng</h3>
                        <canvas id="airlineChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Bookings Page -->
            <div id="bookings-page" class="page">
                <div class="page-header">
                    <h2>Qu·∫£n l√Ω ƒë·∫∑t v√©</h2>
                    <div class="page-actions">
                        <button class="btn btn-success" onclick="showCreateBookingModal()">
                            <i class="fas fa-plus"></i> Th√™m m·ªõi
                        </button>
                        <button class="btn btn-primary" onclick="refreshBookings()">
                            <i class="fas fa-sync-alt"></i> L√†m m·ªõi
                        </button>
                    </div>
                </div>

                <!-- Status Tabs for Bookings -->
                <div id="bookings-status-tabs" class="detail-tabs" style="margin-bottom:16px;">
                    <button class="tab-btn active" data-status="">
                        <i class="fas fa-list"></i> T·∫•t c·∫£
                    </button>
                    <button class="tab-btn" data-status="PENDING">
                        <i class="fas fa-hourglass-half"></i> Ch·ªù x·ª≠ l√Ω
                    </button>
                    <button class="tab-btn" data-status="CONFIRMED">
                        <i class="fas fa-check-circle"></i> ƒê√£ x√°c nh·∫≠n
                    </button>
                    <button class="tab-btn" data-status="CANCELLED">
                        <i class="fas fa-times-circle"></i> ƒê√£ h·ªßy
                    </button>
                </div>

                <!-- Stats Grid -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                            <i class="fas fa-ticket-alt"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="bookings-total-bookings">0</h3>
                            <p>T·ªïng ƒë·∫∑t v√©</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="bookings-confirmed">0</h3>
                            <p>ƒê√£ x√°c nh·∫≠n</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                            <i class="fas fa-money-bill-wave"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="bookings-total-revenue">0 ‚Ç´</h3>
                            <p>Doanh thu</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="bookings-success-rate">0%</h3>
                            <p>T·ª∑ l·ªá th√†nh c√¥ng</p>
                        </div>
                    </div>
                </div>

                <!-- Search, Filter, Sort Controls -->
                <div class="table-controls">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="bookings-search" placeholder="T√¨m ki·∫øm theo m√£ v√©, t√™n kh√°ch h√†ng..." onkeyup="handleBookingsSearch(event)">
                    </div>
                    <div class="filter-box">
                        <select id="bookings-filter-status" onchange="filterBookings()">
                            <option value="">T·∫•t c·∫£ tr·∫°ng th√°i</option>
                            <option value="PENDING">Ch·ªù x·ª≠ l√Ω</option>
                            <option value="CONFIRMED">ƒê√£ x√°c nh·∫≠n</option>
                            <option value="CANCELLED">ƒê√£ h·ªßy</option>
                        </select>
                    </div>
                    <div class="sort-box">
                        <select id="bookings-sort" onchange="sortBookings()">
                            <option value="bookingDate-desc">Ng√†y ƒë·∫∑t (m·ªõi nh·∫•t)</option>
                            <option value="bookingDate-asc">Ng√†y ƒë·∫∑t (c≈© nh·∫•t)</option>
                            <option value="totalAmount-desc">T·ªïng ti·ªÅn (cao ‚Üí th·∫•p)</option>
                            <option value="totalAmount-asc">T·ªïng ti·ªÅn (th·∫•p ‚Üí cao)</option>
                            <option value="bookingId-asc">ID (tƒÉng d·∫ßn)</option>
                            <option value="bookingId-desc">ID (gi·∫£m d·∫ßn)</option>
                        </select>
                    </div>
                    <div class="per-page-box">
                        <label>S·ªë b·∫£n ghi:</label>
                        <select id="bookings-per-page" onchange="changeBookingsPerPage()">
                            <option value="10">10</option>
                            <option value="25" selected>25</option>
                            <option value="50">50</option>
                            <option value="100">100</option>
                        </select>
                    </div>
                    <div class="date-range-picker">
                        <label>T·ª´ ng√†y:</label>
                        <input type="date" id="bookings-start-date" onchange="filterBookings()">
                        <label>ƒê·∫øn ng√†y:</label>
                        <input type="date" id="bookings-end-date" onchange="filterBookings()">
                    </div>
                    <div class="price-range-picker">
                        <label>Gi√° t·ª´:</label>
                        <input type="number" id="bookings-min-price" placeholder="0" step="1000" onchange="filterBookings()">
                        <label>ƒê·∫øn:</label>
                        <input type="number" id="bookings-max-price" placeholder="999999999" step="1000" onchange="filterBookings()">
                    </div>
                </div>

                <!-- Bulk Actions Bar -->
                <div id="bookings-bulk-actions" class="bulk-actions-bar hidden" style="margin-bottom: 15px;">
                    <span><strong><span class="selected-count">0</span> ƒë√£ ch·ªçn</strong></span>
                    <button class="btn btn-danger btn-sm" onclick="bulkDeleteBookings()">
                        <i class="fas fa-trash"></i> X√≥a
                    </button>
                    <button class="btn btn-primary btn-sm" onclick="bulkUpdateBookingStatus('CONFIRMED')">
                        <i class="fas fa-check"></i> X√°c nh·∫≠n
                    </button>
                    <button class="btn btn-warning btn-sm" onclick="bulkUpdateBookingStatus('CANCELLED')">
                        <i class="fas fa-times"></i> H·ªßy
                    </button>
                </div>

                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th style="width: 50px;">
                                    <input type="checkbox" id="bookings-select-all" onchange="toggleSelectAllBookings()" title="Ch·ªçn t·∫•t c·∫£">
                                </th>
                                <th>M√£ ƒë·∫∑t v√©</th>
                                <th>T√™n kh√°ch h√†ng</th>
                                <th>Chuy·∫øn bay</th>
                                <th>T·ªïng ti·ªÅn</th>
                                <th>Tr·∫°ng th√°i</th>
                                <th>Ng√†y ƒë·∫∑t</th>
                                <th>Thao t√°c</th>
                            </tr>
                        </thead>
                        <tbody id="bookings-table-body">
                            <!-- Data will be loaded here -->
                        </tbody>
                    </table>
                </div>

                <!-- Pagination -->
                <div class="pagination" id="bookings-pagination">
                    <button class="btn btn-outline" onclick="changeBookingsPage(1)" id="bookings-page-first">
                        <i class="fas fa-angle-double-left"></i>
                    </button>
                    <button class="btn btn-outline" onclick="changeBookingsPage('prev')" id="bookings-page-prev">
                        <i class="fas fa-angle-left"></i>
                    </button>
                    <span class="page-info" id="bookings-page-info">Trang 1 / 1</span>
                    <button class="btn btn-outline" onclick="changeBookingsPage('next')" id="bookings-page-next">
                        <i class="fas fa-angle-right"></i>
                    </button>
                    <button class="btn btn-outline" onclick="changeBookingsPage(999)" id="bookings-page-last">
                        <i class="fas fa-angle-double-right"></i>
                    </button>
                </div>
            </div>

            <!-- Users Page -->
            <div id="users-page" class="page">
                <div class="page-header">
                    <h2>Qu·∫£n l√Ω kh√°ch h√†ng</h2>
                    <div class="page-actions">
                        <button class="btn btn-success" onclick="showCreateUserModal()">
                            <i class="fas fa-plus"></i> Th√™m m·ªõi
                        </button>
                        <button class="btn btn-primary" onclick="refreshUsers()">
                            <i class="fas fa-sync-alt"></i> L√†m m·ªõi
                        </button>
                    </div>
                </div>

                <!-- Stats Grid -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="users-total-users">0</h3>
                            <p>T·ªïng kh√°ch h√†ng</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                            <i class="fas fa-user-check"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="users-active-users">0</h3>
                            <p>ƒêang ho·∫°t ƒë·ªông</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                            <i class="fas fa-user-plus"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="users-new-today">0</h3>
                            <p>M·ªõi h√¥m nay</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">
                            <i class="fas fa-ticket-alt"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="users-total-bookings">0</h3>
                            <p>T·ªïng ƒë·∫∑t v√©</p>
                        </div>
                    </div>
                </div>

                <!-- Search, Filter, Sort Controls -->
                <div class="table-controls">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="users-search" placeholder="T√¨m ki·∫øm theo t√™n, email, s·ªë ƒëi·ªán tho·∫°i..." onkeyup="handleUsersSearch(event)">
                    </div>
                    <div class="sort-box">
                        <select id="users-sort" onchange="sortUsers()">
                            <option value="createdAt-desc">Ng√†y t·∫°o (m·ªõi nh·∫•t)</option>
                            <option value="createdAt-asc">Ng√†y t·∫°o (c≈© nh·∫•t)</option>
                            <option value="username-asc">T√™n ƒëƒÉng nh·∫≠p (A-Z)</option>
                            <option value="username-desc">T√™n ƒëƒÉng nh·∫≠p (Z-A)</option>
                            <option value="email-asc">Email (A-Z)</option>
                            <option value="email-desc">Email (Z-A)</option>
                            <option value="userId-asc">ID (tƒÉng d·∫ßn)</option>
                            <option value="userId-desc">ID (gi·∫£m d·∫ßn)</option>
                        </select>
                    </div>
                    <div class="per-page-box">
                        <label>S·ªë b·∫£n ghi:</label>
                        <select id="users-per-page" onchange="changeUsersPerPage()">
                            <option value="10">10</option>
                            <option value="25" selected>25</option>
                            <option value="50">50</option>
                            <option value="100">100</option>
                        </select>
                    </div>
                </div>

                <!-- Bulk Actions Bar -->
                <div id="users-bulk-actions" class="bulk-actions-bar hidden" style="margin-bottom: 15px;">
                    <span><strong><span class="selected-count">0</span> ƒë√£ ch·ªçn</strong></span>
                    <button class="btn btn-danger btn-sm" onclick="bulkDeleteUsers()">
                        <i class="fas fa-trash"></i> X√≥a
                    </button>
                </div>

                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th style="width: 50px;">
                                    <input type="checkbox" id="users-select-all" onchange="toggleSelectAllUsers()" title="Ch·ªçn t·∫•t c·∫£">
                                </th>
                                <th>ID</th>
                                <th>T√™n ƒëƒÉng nh·∫≠p</th>
                                <th>Email</th>
                                <th>H·ªç t√™n</th>
                                <th>S·ªë ƒëi·ªán tho·∫°i</th>
                                <th>Tr·∫°ng th√°i</th>
                                <th>T·ªïng ƒë·∫∑t v√©</th>
                                <th>Thao t√°c</th>
                            </tr>
                        </thead>
                        <tbody id="users-table-body">
                            <!-- Data will be loaded here -->
                        </tbody>
                    </table>
                </div>

                <!-- Pagination -->
                <div class="pagination" id="users-pagination">
                    <button class="btn btn-outline" onclick="changeUsersPage(1)" id="users-page-first">
                        <i class="fas fa-angle-double-left"></i>
                    </button>
                    <button class="btn btn-outline" onclick="changeUsersPage('prev')" id="users-page-prev">
                        <i class="fas fa-angle-left"></i>
                    </button>
                    <span class="page-info" id="users-page-info">Trang 1 / 1</span>
                    <button class="btn btn-outline" onclick="changeUsersPage('next')" id="users-page-next">
                        <i class="fas fa-angle-right"></i>
                    </button>
                    <button class="btn btn-outline" onclick="changeUsersPage(999)" id="users-page-last">
                        <i class="fas fa-angle-double-right"></i>
                    </button>
                </div>
            </div>

            <!-- Payments Page -->
            <div id="payments-page" class="page">
                <div class="page-header">
                    <h2>Qu·∫£n l√Ω thanh to√°n</h2>
                    <div class="page-actions">
                        <button class="btn btn-success" onclick="showCreatePaymentModal()">
                            <i class="fas fa-plus"></i> Th√™m m·ªõi
                        </button>
                        <button class="btn btn-primary" onclick="refreshPayments()">
                            <i class="fas fa-sync-alt"></i> L√†m m·ªõi
                        </button>
                    </div>
                </div>

                <!-- Stats Grid -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                            <i class="fas fa-credit-card"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="payments-total">0</h3>
                            <p>T·ªïng giao d·ªãch</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="payments-success">0</h3>
                            <p>Th√†nh c√¥ng</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                            <i class="fas fa-money-bill-wave"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="payments-total-revenue">0 ‚Ç´</h3>
                            <p>T·ªïng doanh thu</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">
                            <i class="fas fa-chart-pie"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="payments-success-rate">0%</h3>
                            <p>T·ª∑ l·ªá th√†nh c√¥ng</p>
                        </div>
                    </div>
                </div>

                <!-- Search, Filter, Sort Controls -->
                <div class="table-controls">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="payments-search" placeholder="T√¨m ki·∫øm theo m√£ giao d·ªãch..." onkeyup="handlePaymentsSearch(event)">
                    </div>
                    <div class="filter-box">
                        <select id="payments-filter-method" onchange="filterPayments()">
                            <option value="">T·∫•t c·∫£ ph∆∞∆°ng th·ª©c</option>
                            <option value="VNPAY">VNPay</option>
                            <option value="MOMO">MoMo</option>
                            <option value="ZALOPAY">ZaloPay</option>
                            <option value="CARD">Th·∫ª t√≠n d·ª•ng</option>
                        </select>
                    </div>
                    <div class="filter-box">
                        <select id="payments-filter-status" onchange="filterPayments()">
                            <option value="">T·∫•t c·∫£ tr·∫°ng th√°i</option>
                            <option value="PENDING">Ch·ªù x·ª≠ l√Ω</option>
                            <option value="SUCCESS">Th√†nh c√¥ng</option>
                            <option value="FAILED">Th·∫•t b·∫°i</option>
                            <option value="REFUNDED">ƒê√£ ho√†n ti·ªÅn</option>
                        </select>
                    </div>
                    <div class="sort-box">
                        <select id="payments-sort" onchange="sortPayments()">
                            <option value="createdAt-desc">Ng√†y t·∫°o (m·ªõi nh·∫•t)</option>
                            <option value="createdAt-asc">Ng√†y t·∫°o (c≈© nh·∫•t)</option>
                            <option value="amount-desc">S·ªë ti·ªÅn (cao ‚Üí th·∫•p)</option>
                            <option value="amount-asc">S·ªë ti·ªÅn (th·∫•p ‚Üí cao)</option>
                            <option value="paymentId-asc">ID (tƒÉng d·∫ßn)</option>
                            <option value="paymentId-desc">ID (gi·∫£m d·∫ßn)</option>
                        </select>
                    </div>
                    <div class="per-page-box">
                        <label>S·ªë b·∫£n ghi:</label>
                        <select id="payments-per-page" onchange="changePaymentsPerPage()">
                            <option value="10">10</option>
                            <option value="25" selected>25</option>
                            <option value="50">50</option>
                            <option value="100">100</option>
                        </select>
                    </div>
                    <div class="date-range-picker">
                        <label>T·ª´ ng√†y:</label>
                        <input type="date" id="payments-start-date" onchange="filterPayments()">
                        <label>ƒê·∫øn ng√†y:</label>
                        <input type="date" id="payments-end-date" onchange="filterPayments()">
                    </div>
                    <div class="price-range-picker">
                        <label>S·ªë ti·ªÅn t·ª´:</label>
                        <input type="number" id="payments-min-amount" placeholder="0" step="1000" onchange="filterPayments()">
                        <label>ƒê·∫øn:</label>
                        <input type="number" id="payments-max-amount" placeholder="999999999" step="1000" onchange="filterPayments()">
                    </div>
                </div>

                <!-- Bulk Actions Bar -->
                <div id="payments-bulk-actions" class="bulk-actions-bar hidden" style="margin-bottom: 15px;">
                    <span><strong><span class="selected-count">0</span> ƒë√£ ch·ªçn</strong></span>
                    <button class="btn btn-danger btn-sm" onclick="bulkDeletePayments()">
                        <i class="fas fa-trash"></i> X√≥a
                    </button>
                </div>

                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th style="width: 50px;">
                                    <input type="checkbox" id="payments-select-all" onchange="toggleSelectAllPayments()" title="Ch·ªçn t·∫•t c·∫£">
                                </th>
                                <th>ID</th>
                                <th>M√£ giao d·ªãch</th>
                                <th>Ph∆∞∆°ng th·ª©c</th>
                                <th>S·ªë ti·ªÅn</th>
                                <th>Tr·∫°ng th√°i</th>
                                <th>Ng√†y t·∫°o</th>
                                <th>Thao t√°c</th>
                            </tr>
                        </thead>
                        <tbody id="payments-table-body">
                            <!-- Data will be loaded here -->
                        </tbody>
                    </table>
                </div>

                <!-- Pagination -->
                <div class="pagination" id="payments-pagination">
                    <button class="btn btn-outline" onclick="changePaymentsPage(1)" id="payments-page-first">
                        <i class="fas fa-angle-double-left"></i>
                    </button>
                    <button class="btn btn-outline" onclick="changePaymentsPage('prev')" id="payments-page-prev">
                        <i class="fas fa-angle-left"></i>
                    </button>
                    <span class="page-info" id="payments-page-info">Trang 1 / 1</span>
                    <button class="btn btn-outline" onclick="changePaymentsPage('next')" id="payments-page-next">
                        <i class="fas fa-angle-right"></i>
                    </button>
                    <button class="btn btn-outline" onclick="changePaymentsPage(999)" id="payments-page-last">
                        <i class="fas fa-angle-double-right"></i>
                    </button>
                </div>
            </div>

            <!-- Flights Page -->
            <div id="flights-page" class="page">
                <div class="page-header">
                    <h2>Qu·∫£n l√Ω chuy·∫øn bay</h2>
                    <div class="page-actions">
                        <button class="btn btn-success" onclick="showAddFlightModal()">‚ûï Add Flight</button>
                        <button class="btn btn-primary" onclick="loadFlights()">üîÑ Refresh</button>
                    </div>
                </div>

                <!-- Status Tabs for Flights -->
                <div id="flights-status-tabs" class="detail-tabs" style="margin-bottom:16px;">
                    <button class="tab-btn active" data-status="">
                        <i class="fas fa-list"></i> T·∫•t c·∫£
                    </button>
                    <button class="tab-btn" data-status="SCHEDULED">
                        <i class="fas fa-calendar-check"></i> ƒê√£ l√™n l·ªãch
                    </button>
                    <button class="tab-btn" data-status="DELAYED">
                        <i class="fas fa-clock"></i> B·ªã ho√£n
                    </button>
                    <button class="tab-btn" data-status="CANCELLED">
                        <i class="fas fa-times-circle"></i> ƒê√£ h·ªßy
                    </button>
                    <button class="tab-btn" data-status="COMPLETED">
                        <i class="fas fa-check-double"></i> ƒê√£ ho√†n th√†nh
                    </button>
                </div>

                <!-- Stats Grid -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                            <i class="fas fa-plane"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="flights-total">0</h3>
                            <p>T·ªïng chuy·∫øn bay</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="flights-scheduled">0</h3>
                            <p>ƒê√£ l√™n l·ªãch</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="flights-delayed">0</h3>
                            <p>B·ªã ho√£n</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">
                            <i class="fas fa-times-circle"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="flights-cancelled">0</h3>
                            <p>ƒê√£ h·ªßy</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #757575 0%, #9e9e9e 100%);">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="flights-completed">0</h3>
                            <p>ƒê√£ ho√†n th√†nh</p>
                        </div>
                    </div>
                </div>

                <div class="filters-container">
                    <input type="text" id="flights-search" placeholder="T√¨m ki·∫øm theo s·ªë hi·ªáu, h√£ng, s√¢n bay..." class="search-input" onkeyup="handleFlightsSearch(event)">
                    <select id="flights-status-filter" class="filter-select" onchange="filterFlights()">
                        <option value="">T·∫•t c·∫£ tr·∫°ng th√°i</option>
                        <option value="SCHEDULED">Scheduled</option>
                        <option value="COMPLETED">Completed</option>
                        <option value="DELAYED">Delayed</option>
                        <option value="CANCELLED">Cancelled</option>
                    </select>
                    <select id="flights-sort" class="filter-select" onchange="sortFlights()">
                        <option value="flightId-asc" selected>ID (tƒÉng d·∫ßn)</option>
                        <option value="flightId-desc">ID (gi·∫£m d·∫ßn)</option>
                        <option value="departureTime-desc">Ng√†y gi·ªù (m·ªõi nh·∫•t)</option>
                        <option value="departureTime-asc">Ng√†y gi·ªù (c≈© nh·∫•t)</option>
                        <option value="basePrice-desc">Gi√° (cao ‚Üí th·∫•p)</option>
                        <option value="basePrice-asc">Gi√° (th·∫•p ‚Üí cao)</option>
                        <option value="airlineName-asc">H√£ng (A-Z)</option>
                        <option value="airlineName-desc">H√£ng (Z-A)</option>
                        <option value="flightNumber-asc">S·ªë hi·ªáu (A-Z)</option>
                        <option value="flightNumber-desc">S·ªë hi·ªáu (Z-A)</option>
                    </select>
                    <div class="per-page-box" style="margin-left:auto">
                        <label>S·ªë b·∫£n ghi:</label>
                        <select id="flights-per-page" onchange="changeFlightsPerPage()">
                            <option value="10">10</option>
                            <option value="25" selected>25</option>
                            <option value="50">50</option>
                            <option value="100">100</option>
                        </select>
                    </div>
                </div>

                <div class="table-container">
                    <table class="data-table" id="flightsTable">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Flight Number</th>
                                <th>Route</th>
                                <th>Date</th>
                                <th>Time</th>
                                <th>Airline</th>
                                <th>Price</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="flightsTableBody"></tbody>
                    </table>
                </div>

                

                <div class="pagination" id="flights-pagination">
                    <button class="btn btn-outline" onclick="changeFlightsPage(1)" id="flights-page-first">
                        <i class="fas fa-angle-double-left"></i>
                    </button>
                    <button class="btn btn-outline" onclick="changeFlightsPage('prev')" id="flights-page-prev">
                        <i class="fas fa-angle-left"></i>
                    </button>
                    <span class="page-info" id="flights-page-info">Trang 1 / 1</span>
                    <button class="btn btn-outline" onclick="changeFlightsPage('next')" id="flights-page-next">
                        <i class="fas fa-angle-right"></i>
                    </button>
                    <button class="btn btn-outline" onclick="changeFlightsPage(999)" id="flights-page-last">
                        <i class="fas fa-angle-double-right"></i>
                    </button>
                </div>
                <div id="loadingIndicator" class="loading" style="display:none">
                    <div class="spinner"></div>
                    <p>ƒêang t·∫£i d·ªØ li·ªáu...</p>
                </div>
            </div>

            <!-- Airline Revenue Page -->
            <div id="airline-revenue-page" class="page">
                <div class="page-header">
                    <h2>Doanh thu theo h√£ng h√†ng kh√¥ng</h2>
                    <div class="page-actions">
                        <button class="btn btn-primary" onclick="loadAirlineRevenue()">
                            <i class="fas fa-sync-alt"></i> L√†m m·ªõi
                        </button>
                    </div>
                </div>

                <!-- Stats Grid -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                            <i class="fas fa-building"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="airline-revenue-total-airlines">0</h3>
                            <p>T·ªïng h√£ng bay</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                            <i class="fas fa-coins"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="airline-revenue-total-revenue">0 ‚Ç´</h3>
                            <p>T·ªïng doanh thu</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                            <i class="fas fa-ticket-alt"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="airline-revenue-total-bookings">0</h3>
                            <p>T·ªïng ƒë·∫∑t v√©</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">
                            <i class="fas fa-chart-bar"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="airline-revenue-avg-revenue">0 ‚Ç´</h3>
                            <p>Doanh thu TB/h√£ng</p>
                        </div>
                    </div>
                </div>

                <!-- Search, Sort, Per-page Controls -->
                <div class="table-controls">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="airline-revenue-search" placeholder="T√¨m theo h√£ng..." onkeyup="handleAirlineRevenueSearch(event)">
                    </div>
                    <div class="sort-box">
                        <select id="airline-revenue-sort" onchange="sortAirlineRevenue()">
                            <option value="revenue-desc">Doanh thu (cao ‚Üí th·∫•p)</option>
                            <option value="revenue-asc">Doanh thu (th·∫•p ‚Üí cao)</option>
                            <option value="paidBookings-desc">ƒê√£ thanh to√°n (nhi·ªÅu ‚Üí √≠t)</option>
                            <option value="paidBookings-asc">ƒê√£ thanh to√°n (√≠t ‚Üí nhi·ªÅu)</option>
                            <option value="totalBookings-desc">T·ªïng ƒë·∫∑t v√© (nhi·ªÅu ‚Üí √≠t)</option>
                            <option value="totalBookings-asc">T·ªïng ƒë·∫∑t v√© (√≠t ‚Üí nhi·ªÅu)</option>
                            <option value="airlineName-asc">H√£ng (A-Z)</option>
                            <option value="airlineName-desc">H√£ng (Z-A)</option>
                        </select>
                    </div>
                    <div class="per-page-box">
                        <label>S·ªë b·∫£n ghi:</label>
                        <select id="airline-revenue-per-page" onchange="changeAirlineRevenuePerPage()">
                            <option value="10">10</option>
                            <option value="25" selected>25</option>
                            <option value="50">50</option>
                            <option value="100">100</option>
                        </select>
                    </div>
                </div>

                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>H√£ng h√†ng kh√¥ng</th>
                                <th>T·ªïng ƒë·∫∑t v√©</th>
                                <th>ƒê√£ thanh to√°n</th>
                                <th>Doanh thu</th>
                            </tr>
                        </thead>
                        <tbody id="airline-revenue-table-body"></tbody>
                    </table>
                </div>

                <!-- Pagination -->
                <div class="pagination" id="airline-revenue-pagination">
                    <button class="btn btn-outline" onclick="changeAirlineRevenuePage(1)" id="airline-revenue-page-first">
                        <i class="fas fa-angle-double-left"></i>
                    </button>
                    <button class="btn btn-outline" onclick="changeAirlineRevenuePage('prev')" id="airline-revenue-page-prev">
                        <i class="fas fa-angle-left"></i>
                    </button>
                    <span class="page-info" id="airline-revenue-page-info">Trang 1 / 1</span>
                    <button class="btn btn-outline" onclick="changeAirlineRevenuePage('next')" id="airline-revenue-page-next">
                        <i class="fas fa-angle-right"></i>
                    </button>
                    <button class="btn btn-outline" onclick="changeAirlineRevenuePage(999)" id="airline-revenue-page-last">
                        <i class="fas fa-angle-double-right"></i>
                    </button>
                </div>
            </div>

            <!-- Customer Support Page -->
            <div id="customer-support-page" class="page">
                <div class="page-header">
                    <h2>H·ªó tr·ª£ kh√°ch h√†ng</h2>
                    <div class="page-actions">
                        <button class="btn btn-primary" onclick="refreshChatConversations()">
                            <i class="fas fa-sync-alt"></i> L√†m m·ªõi
                        </button>
                    </div>
                </div>

                <!-- Stats Grid -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                            <i class="fas fa-comments"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="support-total-conversations">0</h3>
                            <p>T·ªïng cu·ªôc tr√≤ chuy·ªán</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                            <i class="fas fa-envelope"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="support-unread-messages">0</h3>
                            <p>Tin nh·∫Øn ch∆∞a ƒë·ªçc</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="support-pending-replies">0</h3>
                            <p>ƒêang ch·ªù ph·∫£n h·ªìi</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="support-response-rate">0%</h3>
                            <p>T·ª∑ l·ªá ph·∫£n h·ªìi</p>
                        </div>
                    </div>
                </div>

                <div class="modern-chat-container">
                    <!-- Conversations Sidebar -->
                    <div class="conversations-sidebar">
                        <div class="conversations-header">
                            <h3><i class="fas fa-headset"></i> Cu·ªôc tr√≤ chuy·ªán</h3>
                            <div class="search-wrapper">
                                <i class="fas fa-search"></i>
                                <input type="text" id="conversations-search" placeholder="T√¨m kh√°ch h√†ng..." onkeyup="searchConversations()">
                            </div>
                        </div>
                        <div id="conversations-container" class="conversations-items">
                            <!-- Conversations will be loaded here -->
                        </div>
                    </div>

                    <!-- Chat Window -->
                    <div class="modern-chat-window">
                        <div id="no-conversation-selected" class="empty-chat-state">
                            <div class="empty-chat-icon">
                                <i class="fas fa-comments"></i>
                            </div>
                            <h3>Ch·ªçn cu·ªôc tr√≤ chuy·ªán</h3>
                            <p>Ch·ªçn m·ªôt cu·ªôc tr√≤ chuy·ªán t·ª´ danh s√°ch b√™n tr√°i ƒë·ªÉ b·∫Øt ƒë·∫ßu tr√≤ chuy·ªán v·ªõi kh√°ch h√†ng</p>
                        </div>

                        <div id="chat-active" class="active-chat-container" style="display: none;">
                            <!-- Chat Header -->
                            <div class="modern-chat-header">
                                <div class="user-avatar">
                                    <i class="fas fa-user"></i>
                                </div>
                                <div class="chat-user-info">
                                    <h3 id="chat-user-name">Kh√°ch h√†ng</h3>
                                    <span id="chat-user-email" class="user-email"></span>
                                    <span id="chat-status-badge" class="status-badge online">ƒêang online</span>
                                </div>
                                <div class="chat-header-actions">
                                    <button class="icon-btn" onclick="markAllAsRead()" title="ƒê√°nh d·∫•u ƒë√£ ƒë·ªçc">
                                        <i class="fas fa-check-double"></i>
                                    </button>
                                    <button class="icon-btn" onclick="refreshMessages()" title="L√†m m·ªõi">
                                        <i class="fas fa-sync-alt"></i>
                                    </button>
                                </div>
                            </div>

                            <!-- Messages Container -->
                            <div id="messages-container" class="modern-messages-container">
                                <!-- Messages will be loaded here -->
                            </div>

                            <!-- Input Area -->
                            <div class="modern-chat-input">
                                <div class="input-wrapper">
                                    <textarea id="message-input" placeholder="Nh·∫≠p tin nh·∫Øn..." rows="1"></textarea>
                                    <button class="send-btn" onclick="sendAdminMessage()" title="G·ª≠i tin nh·∫Øn">
                                        <i class="fas fa-paper-plane"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Notifications Page -->
            <div id="notifications-page" class="page">
                <div class="page-header">
                    <h2>Qu·∫£n l√Ω th√¥ng b√°o</h2>
                    <div class="page-actions">
                        <button class="btn btn-primary" onclick="refreshNotifications()">
                            <i class="fas fa-sync-alt"></i> L√†m m·ªõi
                        </button>
                        <button class="btn btn-success" onclick="markAllNotificationsAsRead()">
                            <i class="fas fa-check-double"></i> ƒê√°nh d·∫•u t·∫•t c·∫£ ƒë√£ ƒë·ªçc
                        </button>
                    </div>
                </div>

                <!-- Stats Grid -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                            <i class="fas fa-bell"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="notifications-total">0</h3>
                            <p>T·ªïng th√¥ng b√°o</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                            <i class="fas fa-envelope-open"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="notifications-unread">0</h3>
                            <p>Ch∆∞a ƒë·ªçc</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                            <i class="fas fa-ticket-alt"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="notifications-booking">0</h3>
                            <p>Th√¥ng b√°o ƒë·∫∑t v√©</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">
                            <i class="fas fa-plane"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="notifications-flight">0</h3>
                            <p>Th√¥ng b√°o chuy·∫øn bay</p>
                        </div>
                    </div>
                </div>

                <!-- Search, Filter, Sort Controls -->
                <div class="table-controls">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="notifications-search" placeholder="T√¨m ki·∫øm theo ti√™u ƒë·ªÅ, n·ªôi dung..." onkeyup="handleNotificationsSearch(event)">
                    </div>
                    <div class="filter-box">
                        <select id="notifications-filter-type" onchange="filterNotifications()">
                            <option value="">T·∫•t c·∫£ lo·∫°i</option>
                            <option value="BOOKING">ƒê·∫∑t v√©</option>
                            <option value="FLIGHT_UPDATE">C·∫≠p nh·∫≠t chuy·∫øn bay</option>
                            <option value="PAYMENT">Thanh to√°n</option>
                            <option value="REMINDER">Nh·∫Øc nh·ªü</option>
                        </select>
                    </div>
                    <div class="filter-box">
                        <select id="notifications-filter-status" onchange="filterNotifications()">
                            <option value="">T·∫•t c·∫£ tr·∫°ng th√°i</option>
                            <option value="UNREAD">Ch∆∞a ƒë·ªçc</option>
                            <option value="READ">ƒê√£ ƒë·ªçc</option>
                        </select>
                    </div>
                    <div class="sort-box">
                        <select id="notifications-sort" onchange="sortNotifications()">
                            <option value="createdAt-desc">Ng√†y t·∫°o (m·ªõi nh·∫•t)</option>
                            <option value="createdAt-asc">Ng√†y t·∫°o (c≈© nh·∫•t)</option>
                            <option value="status-asc">Tr·∫°ng th√°i (Ch∆∞a ƒë·ªçc tr∆∞·ªõc)</option>
                            <option value="status-desc">Tr·∫°ng th√°i (ƒê√£ ƒë·ªçc tr∆∞·ªõc)</option>
                        </select>
                    </div>
                    <div class="per-page-box">
                        <label>S·ªë b·∫£n ghi:</label>
                        <select id="notifications-per-page" onchange="changeNotificationsPerPage()">
                            <option value="25" selected>25</option>
                            <option value="50">50</option>
                            <option value="100">100</option>
                        </select>
                    </div>
                </div>

                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th><input type="checkbox" id="notifications-select-all" onchange="toggleSelectAllNotifications()"></th>
                                <th>Ti√™u ƒë·ªÅ</th>
                                <th>N·ªôi dung</th>
                                <th>Lo·∫°i</th>
                                <th>Tr·∫°ng th√°i</th>
                                <th>Kh√°ch h√†ng</th>
                                <th>Ng√†y t·∫°o</th>
                                <th>Thao t√°c</th>
                            </tr>
                        </thead>
                        <tbody id="notifications-table-body">
                            <!-- Data will be loaded here -->
                        </tbody>
                    </table>
                </div>

                <!-- Pagination -->
                <div class="pagination" id="notifications-pagination">
                    <button class="btn btn-outline" onclick="changeNotificationsPage(1)" id="notifications-page-first">
                        <i class="fas fa-angle-double-left"></i>
                    </button>
                    <button class="btn btn-outline" onclick="changeNotificationsPage('prev')" id="notifications-page-prev">
                        <i class="fas fa-angle-left"></i>
                    </button>
                    <span class="page-info" id="notifications-page-info">Trang 1 / 1</span>
                    <button class="btn btn-outline" onclick="changeNotificationsPage('next')" id="notifications-page-next">
                        <i class="fas fa-angle-right"></i>
                    </button>
                    <button class="btn btn-outline" onclick="changeNotificationsPage(999)" id="notifications-page-last">
                        <i class="fas fa-angle-double-right"></i>
                    </button>
                </div>
            </div>

            <!-- Reports Page -->
            <div id="reports-page" class="page">
                <div class="page-header">
                    <h2>B√°o c√°o & Ph√¢n t√≠ch</h2>
                    <div class="page-actions">
                        <button class="btn btn-success" onclick="exportReport()">
                            <i class="fas fa-file-excel"></i> Xu·∫•t Excel
                        </button>
                        <button class="btn btn-primary" onclick="refreshReports()">
                            <i class="fas fa-sync-alt"></i> L√†m m·ªõi
                        </button>
                    </div>
                </div>

                <!-- Time Period Filter -->
                <div class="revenue-filter" style="margin: 20px 0; display: flex; gap: 10px; align-items: center; flex-wrap: wrap;">
                    <label style="font-weight: bold;">K·ª≥ b√°o c√°o:</label>
                    <select id="report-period" onchange="changeReportPeriod()" style="padding: 8px 12px; border: 1px solid #ddd; border-radius: 5px; font-size: 14px;">
                        <option value="today">H√¥m nay</option>
                        <option value="week">Tu·∫ßn n√†y</option>
                        <option value="month" selected>Th√°ng n√†y</option>
                        <option value="quarter">Qu√Ω n√†y</option>
                        <option value="year">NƒÉm n√†y</option>
                        <option value="custom">T√πy ch·ªçn</option>
                    </select>
                    <input type="date" id="report-start-date" style="padding: 8px; border: 1px solid #ddd; border-radius: 5px; display:none;">
                    <span id="report-date-separator" style="display:none;">ƒë·∫øn</span>
                    <input type="date" id="report-end-date" style="padding: 8px; border: 1px solid #ddd; border-radius: 5px; display:none;">
                    <button class="btn btn-primary" onclick="applyReportFilter()" style="padding: 8px 16px;">
                        <i class="fas fa-filter"></i> √Åp d·ª•ng
                    </button>
                </div>

                <!-- Report Stats -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                            <i class="fas fa-money-bill-wave"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="report-total-revenue">0 ‚Ç´</h3>
                            <p>T·ªïng doanh thu</p>
                            <small id="report-revenue-change" class="text-muted">-</small>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                            <i class="fas fa-ticket-alt"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="report-total-bookings">0</h3>
                            <p>T·ªïng ƒë·∫∑t v√©</p>
                            <small id="report-bookings-change" class="text-muted">-</small>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                            <i class="fas fa-user-plus"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="report-new-users">0</h3>
                            <p>Kh√°ch h√†ng m·ªõi</p>
                            <small id="report-users-change" class="text-muted">-</small>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">
                            <i class="fas fa-percentage"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="report-conversion-rate">0%</h3>
                            <p>T·ª∑ l·ªá chuy·ªÉn ƒë·ªïi</p>
                            <small id="report-conversion-change" class="text-muted">-</small>
                        </div>
                    </div>
                </div>

                <!-- Report Tabs -->
                <div class="report-tabs" style="margin: 20px 0;">
                    <button class="report-tab active" onclick="switchReportTab('overview')" data-tab="overview">T·ªïng quan</button>
                    <button class="report-tab" onclick="switchReportTab('customers')" data-tab="customers">Top Kh√°ch h√†ng</button>
                    <button class="report-tab" onclick="switchReportTab('routes')" data-tab="routes">Top Tuy·∫øn ƒë∆∞·ªùng</button>
                    <button class="report-tab" onclick="switchReportTab('airlines')" data-tab="airlines">Top H√£ng bay</button>
                </div>

                <!-- Report Content -->
                <div id="report-overview" class="report-tab-content active">
                    <div class="charts-grid">
                        <div class="chart-card">
                            <h3>Doanh thu theo th·ªùi gian</h3>
                            <div style="position: relative; height: 300px;">
                                <canvas id="reportRevenueChart"></canvas>
                            </div>
                        </div>
                        <div class="chart-card">
                            <h3>Ph√¢n t√≠ch ƒë·∫∑t v√©</h3>
                            <div style="position: relative; height: 300px;">
                                <canvas id="reportBookingsChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="report-customers" class="report-tab-content" style="display:none;">
                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Kh√°ch h√†ng</th>
                                    <th>S·ªë ƒë·∫∑t v√©</th>
                                    <th>T·ªïng ti·ªÅn</th>
                                </tr>
                            </thead>
                            <tbody id="report-customers-body"></tbody>
                        </table>
                    </div>
                </div>

                <div id="report-routes" class="report-tab-content" style="display:none;">
                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Tuy·∫øn ƒë∆∞·ªùng</th>
                                    <th>S·ªë chuy·∫øn bay</th>
                                    <th>S·ªë ƒë·∫∑t v√©</th>
                                </tr>
                            </thead>
                            <tbody id="report-routes-body"></tbody>
                        </table>
                    </div>
                </div>

                <div id="report-airlines" class="report-tab-content" style="display:none;">
                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>H√£ng bay</th>
                                    <th>S·ªë chuy·∫øn bay</th>
                                    <th>Doanh thu</th>
                                </tr>
                            </thead>
                            <tbody id="report-airlines-body"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Seat Manager Modal -->
    <div id="seatManagerModal" class="modal" style="display:none">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Qu·∫£n l√≠ gh·∫ø - Flight <span id="seatManagerFlightNumber"></span></h3>
                <span class="close" id="seatManagerClose">&times;</span>
            </div>
            <div class="modal-body">
                <div class="seat-toolbar">
                    <select id="seatFilterClass">
                        <option value="">T·∫•t c·∫£ h·∫°ng</option>
                        <option value="FIRST_CLASS">First</option>
                        <option value="BUSINESS">Business</option>
                        <option value="ECONOMY">Economy</option>
                    </select>
                    <button class="btn btn-primary" id="bulkSetAvailable"><i class="fas fa-lock-open"></i> M·ªü gh·∫ø</button>
                    <button class="btn btn-warning" id="bulkSetUnavailable"><i class="fas fa-lock"></i> Kh√≥a gh·∫ø</button>
                    <button class="btn btn-secondary" id="bulkSetExtraFee"><i class="fas fa-dollar-sign"></i> ƒê·∫∑t ph·ª• ph√≠</button>
                    <button class="btn" id="regenerateSeats"><i class="fas fa-th"></i> T·∫°o l·∫°i gh·∫ø</button>
                </div>
                <div id="seatGrid" class="seat-grid"></div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div id="booking-detail-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Chi ti·∫øt ƒë·∫∑t v√©</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body" id="booking-detail-content">
                <!-- Content will be loaded here -->
            </div>
        </div>
    </div>

    <div id="user-history-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>L·ªãch s·ª≠ ƒë·∫∑t v√©</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body" id="user-history-content">
                <!-- Content will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Create/Edit Booking Modal -->
    <div id="booking-form-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="booking-form-title">Th√™m ƒë·∫∑t v√© m·ªõi</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <form id="booking-form">
                    <input type="hidden" id="booking-id" name="bookingId">
                    <div class="form-group">
                        <label for="booking-user-id">Kh√°ch h√†ng *</label>
                        <select id="booking-user-id" name="userId" required>
                            <option value="">Ch·ªçn kh√°ch h√†ng</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="booking-flight-id">Chuy·∫øn bay *</label>
                        <select id="booking-flight-id" name="flightId" required>
                            <option value="">Ch·ªçn chuy·∫øn bay</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="booking-seat-class-id">H·∫°ng gh·∫ø *</label>
                        <select id="booking-seat-class-id" name="seatClassId" required>
                            <option value="">Ch·ªçn h·∫°ng gh·∫ø</option>
                            <option value="1">Economy</option>
                            <option value="2">Business</option>
                            <option value="3">First Class</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="booking-passengers">S·ªë l∆∞·ª£ng h√†nh kh√°ch *</label>
                        <input type="number" id="booking-passengers" name="passengers" min="1" max="9" value="1" required>
                    </div>
                    <div class="form-group">
                        <label for="booking-status">Tr·∫°ng th√°i</label>
                        <select id="booking-status" name="bookingStatus">
                            <option value="PENDING">Ch·ªù x·ª≠ l√Ω</option>
                            <option value="CONFIRMED">ƒê√£ x√°c nh·∫≠n</option>
                            <option value="CANCELLED">ƒê√£ h·ªßy</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="booking-notes">Ghi ch√∫</label>
                        <textarea id="booking-notes" name="notes" rows="3"></textarea>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="closeModal('booking-form-modal')">H·ªßy</button>
                        <button type="submit" class="btn btn-primary">L∆∞u</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Create/Edit User Modal -->
    <div id="user-form-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="user-form-title">Th√™m kh√°ch h√†ng m·ªõi</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <form id="user-form">
                    <input type="hidden" id="user-id" name="userId">
                    <div class="form-group">
                        <label for="user-username">T√™n ƒëƒÉng nh·∫≠p *</label>
                        <input type="text" id="user-username" name="username" required>
                    </div>
                    <div class="form-group">
                        <label for="user-email">Email *</label>
                        <input type="email" id="user-email" name="email" required>
                    </div>
                    <div class="form-group">
                        <label for="user-password">M·∫≠t kh·∫©u *</label>
                        <input type="password" id="user-password" name="password" required>
                    </div>
                    <div class="form-group">
                        <label for="user-fullname">H·ªç t√™n *</label>
                        <input type="text" id="user-fullname" name="fullName" required>
                    </div>
                    <div class="form-group">
                        <label for="user-phone">S·ªë ƒëi·ªán tho·∫°i</label>
                        <input type="tel" id="user-phone" name="phone">
                    </div>
                    <div class="form-group">
                        <label for="user-active">Tr·∫°ng th√°i</label>
                        <select id="user-active" name="isActive">
                            <option value="true">Ho·∫°t ƒë·ªông</option>
                            <option value="false">Kh√¥ng ho·∫°t ƒë·ªông</option>
                        </select>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="closeModal('user-form-modal')">H·ªßy</button>
                        <button type="submit" class="btn btn-primary">L∆∞u</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Create/Edit Payment Modal -->
    <div id="payment-form-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="payment-form-title">Th√™m thanh to√°n m·ªõi</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <form id="payment-form">
                    <input type="hidden" id="payment-id" name="paymentId">
                    <div class="form-group">
                        <label for="payment-booking-id">ƒê·∫∑t v√© *</label>
                        <select id="payment-booking-id" name="bookingId" required>
                            <option value="">Ch·ªçn ƒë·∫∑t v√©</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="payment-method">Ph∆∞∆°ng th·ª©c thanh to√°n *</label>
                        <select id="payment-method" name="paymentMethod" required>
                            <option value="">Ch·ªçn ph∆∞∆°ng th·ª©c</option>
                            <option value="VNPAY">VNPay</option>
                            <option value="MOMO">MoMo</option>
                            <option value="ZALOPAY">ZaloPay</option>
                            <option value="CARD">Th·∫ª t√≠n d·ª•ng</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="payment-amount">S·ªë ti·ªÅn *</label>
                        <input type="number" id="payment-amount" name="amount" step="0.01" required>
                    </div>
                    <div class="form-group">
                        <label for="payment-status">Tr·∫°ng th√°i</label>
                        <select id="payment-status" name="status">
                            <option value="PENDING">Ch·ªù x·ª≠ l√Ω</option>
                            <option value="SUCCESS">Th√†nh c√¥ng</option>
                            <option value="FAILED">Th·∫•t b·∫°i</option>
                            <option value="REFUNDED">ƒê√£ ho√†n ti·ªÅn</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="payment-notes">Ghi ch√∫</label>
                        <textarea id="payment-notes" name="notes" rows="3"></textarea>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="closeModal('payment-form-modal')">H·ªßy</button>
                        <button type="submit" class="btn btn-primary">L∆∞u</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="delete-confirm-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>X√°c nh·∫≠n x√≥a</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <p id="delete-confirm-message">B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a m·ª•c n√†y?</p>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('delete-confirm-modal')">H·ªßy</button>
                    <button type="button" class="btn btn-danger" onclick="confirmDelete()">X√≥a</button>
                </div>
            </div>
        </div>
    </div>

    <!-- User Detail Modal -->
    <div id="user-detail-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Chi ti·∫øt kh√°ch h√†ng</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body" id="user-detail-content"></div>
        </div>
    </div>

    <!-- Add/Edit Flight Modal (for Flights page) -->
    <div id="flightModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('flightModal')">&times;</span>
            <h2 id="modalTitle">Add Flight</h2>
            <form id="flightForm"></form>
        </div>
    </div>

    <!-- Flight Detail Modal -->
    <div id="flightDetailModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Chi ti·∫øt chuy·∫øn bay</h3>
                <span class="close" onclick="closeFlightDetailModal()">&times;</span>
            </div>
            <div class="modal-body" id="flightDetailBody"></div>
        </div>
    </div>

    <script src="js/config.js"></script>
    <script src="js/api.js"></script>
    <script src="js/api-checker.js"></script>
    <script src="js/admin.js"></script>
    <script src="js/flights.js"></script>
    <script src="js/seats.js"></script>
    <script src="js/chat.js"></script>
    <script src="js/admin-features.js"></script>
</body>
</html>
